<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>AI Comic Studio</title>
    <style>
        :root { --primary: #ffcc00; --dark: #1a1a1a; }
        body { font-family: 'Comic Sans MS', cursive; background: #eee; margin: 0; overflow-x: hidden; }
        
        /* Pantalla de Inicio */
        #home-screen { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; }
        .selector-container { display: flex; gap: 40px; margin-top: 30px; }
        .card { width: 300px; padding: 40px; background: white; border: 5px solid var(--dark); cursor: pointer; transition: 0.3s; box-shadow: 10px 10px 0px var(--dark); text-align: center; }
        .card:hover { transform: translate(-5px, -5px); box-shadow: 15px 15px 0px var(--primary); }
        
        /* El Editor */
        #editor-screen { display: none; padding: 20px; text-align: center; }
        
        .canvas-area { 
            border: 2px solid #999; 
            background: white; 
            margin: 20px auto; 
            width: 500px;  
            height: 700px; 
            position: relative; 
            cursor: crosshair;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .guia-linea { position: absolute; background: black; transform-origin: 0 50%; pointer-events: none; z-index: 10; }
        #linea-temporal { background: rgba(255, 0, 0, 0.5); height: 2px !important; z-index: 5; position: absolute; }

        .hidden { display: none !important; }
        .controls { margin-bottom: 20px; background: white; padding: 15px; border-bottom: 3px solid black; display: flex; justify-content: center; gap: 15px; align-items: center; }
        button { padding: 10px 20px; font-weight: bold; border: 3px solid black; cursor: pointer; background: var(--primary); }
    </style>
</head>
<body>

    <div id="home-screen">
        <h1>Â¿QUÃ‰ VAMOS A CREAR HOY?</h1>
        <div class="selector-container">
            <div class="card" onclick="activarEditor('ilustracion')">
                <h2>ðŸŽ¨ ILUSTRACIÃ“N</h2>
                <p>Una sola imagen Ã©pica.</p>
            </div>
            <div class="card" onclick="activarEditor('comic')">
                <h2>ðŸ“š CÃ“MIC / MANGA</h2>
                <p>DiseÃ±a tus viÃ±etas.</p>
            </div>
        </div>
    </div>

    <div id="editor-screen">
        <div class="controls">
            <button onclick="irAHome()">â¬… Volver</button>
            <strong id="modo-titulo">Editor</strong>
            <button onclick="limpiarLienzo()" style="background: #ff4444; color: white;">Limpiar Todo</button>
            <button onclick="alert('Â¡Genial! Paneles listos. En el siguiente paso activaremos la IA.')">Â¡Siguiente!</button>
        </div>
        
        <p>Pincha y arrastra dentro de la hoja para dibujar tus viÃ±etas:</p>
        <div class="canvas-area" id="lienzo">
            <div id="linea-temporal" class="guia-linea" style="display:none"></div>
        </div>
    </div>

    <script>
        // Funciones de navegaciÃ³n
        function activarEditor(modo) {
            console.log("Cambiando a modo:", modo);
            document.getElementById('home-screen').classList.add('hidden');
            document.getElementById('editor-screen').style.display = 'block';
            document.getElementById('modo-titulo').innerText = modo === 'ilustracion' ? 'Modo IlustraciÃ³n' : 'Modo CÃ³mic (Dibuja tus paneles)';
        }

        function irAHome() {
            document.getElementById('home-screen').classList.remove('hidden');
            document.getElementById('editor-screen').style.display = 'none';
        }

        // LÃ³gica de dibujo
        let dibujando = false;
        let xInicio, yInicio;
        const lienzo = document.getElementById('lienzo');
        const lineaTemporal = document.getElementById('linea-temporal');

        function limpiarLienzo() {
            const lineas = lienzo.querySelectorAll('.real-line');
            lineas.forEach(l => l.remove());
        }

        lienzo.addEventListener('mousedown', (e) => {
            dibujando = true;
            const rect = lienzo.getBoundingClientRect();
            xInicio = e.clientX - rect.left;
            yInicio = e.clientY - rect.top;
            
            lineaTemporal.style.display = 'block';
            actualizarPosicionLinea(lineaTemporal, xInicio, yInicio, xInicio, yInicio);
        });

        window.addEventListener('mousemove', (e) => {
            if (!dibujando) return;
            const rect = lienzo.getBoundingClientRect();
            const xActual = e.clientX - rect.left;
            const yActual = e.clientY - rect.top;
            actualizarPosicionLinea(lineaTemporal, xInicio, yInicio, xActual, yActual);
        });

        window.addEventListener('mouseup', (e) => {
            if (!dibujando) return;
            dibujando = false;
            lineaTemporal.style.display = 'none';
            
            const rect = lienzo.getBoundingClientRect();
            const xFin = e.clientX - rect.left;
            const yFin = e.clientY - rect.top;
            
            if (Math.abs(xFin - xInicio) > 5 || Math.abs(yFin - yInicio) > 5) {
                crearLineaFija(xInicio, yInicio, xFin, yFin);
            }
        });

        function actualizarPosicionLinea(lineaElement, x1, y1, x2, y2) {
            const dist = Math.sqrt((x2-x1)**2 + (y2-y1)**2);
            const angulo = Math.atan2(y2-y1, x2-x1) * 180 / Math.PI;
            
            lineaElement.style.width = dist + 'px';
            lineaElement.style.left = x1 + 'px';
            lineaElement.style.top = y1 + 'px';
            lineaElement.style.transform = `rotate(${angulo}deg)`;
        }

        function crearLineaFija(x1, y1, x2, y2) {
            const nuevaLinea = document.createElement('div');
            nuevaLinea.className = 'guia-linea real-line';
            nuevaLinea.style.height = '4px';
            actualizarPosicionLinea(nuevaLinea, x1, y1, x2, y2);
            lienzo.appendChild(nuevaLinea);
        }
    </script>
</body>
</html>
