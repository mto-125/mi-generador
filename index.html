<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>AI Comic Studio</title>
    <style>
        :root { --primary: #ffcc00; --dark: #1a1a1a; }
        body { font-family: 'Comic Sans MS', cursive; background: #eee; margin: 0; overflow-x: hidden; }
        
        /* Pantalla de Inicio */
        #home-screen { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; }
        .selector-container { display: flex; gap: 40px; margin-top: 30px; }
        .card { width: 300px; padding: 40px; background: white; border: 5px solid var(--dark); cursor: pointer; transition: 0.3s; box-shadow: 10px 10px 0px var(--dark); text-align: center; }
        .card:hover { transform: translate(-5px, -5px); box-shadow: 15px 15px 0px var(--primary); }
        
        /* El Editor */
        #editor-screen { display: none; padding: 20px; text-align: center; }
        .canvas-area { 
            border: 5px solid black; 
            background: white; 
            margin: 20px auto; 
            width: 800px; 
            height: 600px; 
            position: relative; 
            cursor: crosshair;
            overflow: hidden;
        }
        
        /* Estilo de las lÃ­neas dibujadas */
        .guia-linea { position: absolute; background: black; transform-origin: 0 0; pointer-events: none; }

        .hidden { display: none !important; }
        .controls { margin-bottom: 20px; background: white; padding: 15px; border-bottom: 3px solid black; display: flex; justify-content: center; gap: 15px; align-items: center; }
        button { padding: 10px 20px; font-weight: bold; border: 3px solid black; cursor: pointer; background: var(--primary); }
        button:hover { background: white; }
    </style>
</head>
<body>

    <div id="home-screen">
        <h1>Â¿QUÃ‰ VAMOS A CREAR HOY?</h1>
        <div class="selector-container">
            <div class="card" onclick="mostrarEditor('ilustracion')">
                <h2>ðŸŽ¨ ILUSTRACIÃ“N</h2>
                <p>Una sola imagen Ã©pica.</p>
            </div>
            <div class="card" onclick="mostrarEditor('comic')">
                <h2>ðŸ“š CÃ“MIC / MANGA</h2>
                <p>DiseÃ±a tus viÃ±etas y crea tu historia.</p>
            </div>
        </div>
    </div>

    <div id="editor-screen">
        <div class="controls">
            <button onclick="irAHome()">â¬… Volver</button>
            <strong id="modo-titulo">Editor</strong>
            <div id="herramientas-comic">
                <select id="orden-lectura">
                    <option value="occidental">Lectura Occidental (Z)</option>
                    <option value="oriental">Lectura Oriental (Manga)</option>
                </select>
                <button onclick="limpiarLienzo()" style="background: #ff4444; color: white;">Limpiar Todo</button>
            </div>
            <button onclick="alert('Pronto: AquÃ­ conectaremos la IA con estos paneles')">Â¡Siguiente Paso!</button>
        </div>
        
        <p>Haz clic y arrastra en el recuadro blanco para crear tus viÃ±etas:</p>
        <div class="canvas-area" id="lienzo"></div>
    </div>

    <script>
        let dibujando = false;
        let xInicio, yInicio;
        const lienzo = document.getElementById('lienzo');

        function mostrarEditor(modo) {
            document.getElementById('home-screen').classList.add('hidden');
            document.getElementById('editor-screen').style.display = 'block';
            document.getElementById('modo-titulo').innerText = modo === 'ilustracion' ? 'Nueva IlustraciÃ³n' : 'DiseÃ±o de Paneles';
            if(modo === 'ilustracion') {
                document.getElementById('herramientas-comic').classList.add('hidden');
                lienzo.style.borderStyle = "solid";
            } else {
                document.getElementById('herramientas-comic').classList.remove('hidden');
            }
        }

        function irAHome() {
            document.getElementById('home-screen').classList.remove('hidden');
            document.getElementById('editor-screen').style.display = 'none';
        }

        function limpiarLienzo() {
            lienzo.innerHTML = '';
        }

        // LÃ“GICA DE DIBUJO DE LÃNEAS RECTAS
        lienzo.addEventListener('mousedown', (e) => {
            dibujando = true;
            const rect = lienzo.getBoundingClientRect();
            xInicio = e.clientX - rect.left;
            yInicio = e.clientY - rect.top;
        });

        window.addEventListener('mouseup', () => {
            dibujando = false;
        });

        lienzo.addEventListener('mousemove', (e) => {
            if (!dibujando) return;
            
            // Si queremos que las lÃ­neas se queden fijas, creamos un elemento
            // Para esta versiÃ³n simple, cada vez que sueltas se queda la lÃ­nea.
        });

        lienzo.addEventListener('click', (e) => {
            // Un sistema de "clic para inicio, clic para fin" es mÃ¡s fÃ¡cil para empezar
            const rect = lienzo.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            if (!window.puntoPendiente) {
                window.puntoPendiente = {x, y};
            } else {
                crearLinea(window.puntoPendiente.x, window.puntoPendiente.y, x, y);
                window.puntoPendiente = null;
            }
        });

        function crearLinea(x1, y1, x2, y2) {
            const linea = document.createElement('div');
            linea.className = 'guia-linea';
            const dist = Math.sqrt((x2-x1)**2 + (y2-y1)**2);
            const angulo = Math.atan2(y2-y1, x2-x1) * 180 / Math.PI;
            
            linea.style.width = dist + 'px';
            linea.style.height = '4px'; // Grosor de la lÃ­nea del cÃ³mic
            linea.style.left = x1 + 'px';
            linea.style.top = y1 + 'px';
            linea.style.transform = `rotate(${angulo}deg)`;
            
            lienzo.appendChild(linea);
        }
    </script>
</body>
</html>
