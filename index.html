<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Generador de C√≥mics con IA</title>
    <style>
        body { font-family: 'Comic Sans MS', cursive; background-color: #f0f0f0; text-align: center; padding: 20px; }
        .comic-container { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; max-width: 900px; margin: 20px auto; }
        .panel { border: 5px solid black; background: white; min-height: 400px; position: relative; display: flex; align-items: center; justify-content: center; background-size: cover; background-position: center; }
        .panel span { background: rgba(255,255,255,0.7); padding: 5px; font-weight: bold; }
        input { padding: 12px; width: 60%; border: 3px solid black; border-radius: 5px; }
        button { padding: 12px 25px; background: #ffcc00; border: 3px solid black; cursor: pointer; font-weight: bold; border-radius: 5px; }
        button:hover { background: #ffaa00; }
        #loading { display: none; color: blue; font-weight: bold; margin: 10px; }
    </style>
</head>
<body>

    <h1>Mago de C√≥mics IA üé®</h1>
    
    <div id="setup">
        <input type="password" id="apiKey" placeholder="Pega aqu√≠ tu API Key (sk-...)">
        <p><small>Tu llave se guardar√° solo en este navegador para tu seguridad.</small></p>
    </div>

    <hr>

    <input type="text" id="prompt" placeholder="Describe la escena (ej: Un astronauta bailando en la luna)">
    <button onclick="generarImagen()">¬°Generar Vi√±eta!</button>
    
    <div id="loading">La IA est√° dibujando... espera unos segundos ‚è≥</div>

    <div class="comic-container">
        <div class="panel" id="p1"><span>Panel 1</span></div>
    </div>

    <script>
        async function generarImagen() {
            const prompt = document.getElementById('prompt').value;
            const key = document.getElementById('apiKey').value;
            const loading = document.getElementById('loading');
            const panel1 = document.getElementById('p1');

            if (!prompt || !key) {
                alert("Por favor, escribe una descripci√≥n y aseg√∫rate de haber pegado tu API Key.");
                return;
            }

            loading.style.display = "block";

            try {
                const response = await fetch('https://api.openai.com/v1/images/generations', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${key}`
                    },
                    body: JSON.stringify({
                        model: "dall-e-3",
                        prompt: prompt,
                        n: 1,
                        size: "1024x1024"
                    })
                });

                const data = await response.json();
                
                if (data.error) {
                    alert("Error de OpenAI: " + data.error.message);
                } else {
                    const urlImagen = data.data[0].url;
                    panel1.style.backgroundImage = `url('${urlImagen}')`;
                    panel1.innerHTML = ""; // Quita el texto de "Panel 1"
                }
            } catch (error) {
                alert("Hubo un error al conectar con la IA.");
                console.error(error);
            } finally {
                loading.style.display = "none";
            }
        }
    </script>
</body>
</html>
